<launch>
  <!-- 启动 k4a_driver 节点 -->
  <node pkg="k4a_driver" type="k4a_driver_node" name="k4a_driver_node" output="screen">
    <param name="color_enabled" value="true"/> <!-- 启用RGB图像 -->
    <param name="depth_enabled" value="true"/> <!-- 启用深度图像 -->
    <param name="depth_mode" value="2"/> <!-- 深度模式选择 -->
    <param name="fps" value="30"/> <!-- 设置帧率 -->
    <param name="imu_enabled" value="true"/> <!-- 启用IMU -->
    <param name="point_cloud" value="true"/> <!-- 生成点云数据 -->
  </node>

  <!-- 启动 RTAB-Map -->
  <include file="$(find rtabmap_ros)/launch/rtabmap.launch">
    <arg name="rgb_topic" value="/rgb/image_raw"/> <!-- RGB 图像话题 -->
    <arg name="depth_topic" value="/depth/image_raw"/> <!-- 深度图像话题 -->
    <arg name="camera_info_topic" value="/rgb/camera_info"/> <!-- 相机信息话题 -->
  </include>

  <!-- 启动 rtabmap 可视化界面 -->
  <node pkg="rtabmap_ros" type="rtabmap_visualization" name="rtabmap_visualization" output="screen">
    <param name="frame_id" value="base_link"/>
    <param name="subscribe_depth" value="true"/>
    <param name="subscribe_rgb" value="true"/>
    <param name="subscribe_imu" value="true"/>
    <param name="visual_odometry" value="true"/>
  </node>
</launch>

